# HVDC Project - í†µí•© Cursor Rules v1.0
# Samsung C&T Logistics | ADNOCÂ·DSV Partnership

## ðŸŽ¯ CORE DEVELOPMENT PRINCIPLES

### TDD Cycle (Kent Beck)
- **Red â†’ Green â†’ Refactor** ìˆœí™˜ ì¤€ìˆ˜
- **plan.md ì¤‘ì‹¬**: `go` ëª…ë ¹ ì‹œ ë‹¤ìŒ ë¯¸ì²´í¬ í…ŒìŠ¤íŠ¸ ìžë™ ì‹¤í–‰
- **Structural vs Behavioral** ì»¤ë°‹ ì™„ì „ ë¶„ë¦¬
- **ìµœì†Œ êµ¬í˜„**: í…ŒìŠ¤íŠ¸ í†µê³¼ë¥¼ ìœ„í•œ ìµœì†Œ ì½”ë“œë§Œ ìž‘ì„±

### Code Quality Standards
- **ì¤‘ë³µ ì œê±°**: ëª¨ë“  ì¤‘ë³µ ì½”ë“œ ì œê±° ìš°ì„ 
- **ëª…í™•í•œ ì˜ë„**: í•¨ìˆ˜ëª…/ë³€ìˆ˜ëª…ìœ¼ë¡œ ì˜ë„ ëª…í™•ížˆ í‘œí˜„
- **ë‹¨ì¼ ì±…ìž„**: í•¨ìˆ˜ëŠ” í•˜ë‚˜ì˜ ì±…ìž„ë§Œ ë‹´ë‹¹
- **ê°€ìž¥ ë‹¨ìˆœí•œ ì†”ë£¨ì…˜**: ë³µìž¡í•œ í•´ê²°ì±…ë³´ë‹¤ ë‹¨ìˆœí•œ ê²ƒ ìš°ì„ 

## ðŸ“ COMMIT DISCIPLINE

### ì»¤ë°‹ ë©”ì‹œì§€ í‘œì¤€ (í†µí•©)
```
[TYPE] scope: description

TYPE = STRUCT | FEAT | FIX | PERF | MODE | CMD | TEST | DOCS
```

**íƒ€ìž… ì •ì˜**:
- `STRUCT`: êµ¬ì¡°ì  ë³€ê²½ (rename, extract, move, refactor)
- `FEAT`: ìƒˆ ê¸°ëŠ¥ ì¶”ê°€
- `FIX`: ë²„ê·¸ ìˆ˜ì •
- `PERF`: ì„±ëŠ¥ ìµœì í™”
- `MODE`: MACHO-GPT containment mode ë³€ê²½
- `CMD`: ëª…ë ¹ì–´ ì‹œìŠ¤í…œ ë³€ê²½
- `TEST`: í…ŒìŠ¤íŠ¸ ì¶”ê°€/ìˆ˜ì •
- `DOCS`: ë¬¸ì„œ ì—…ë°ì´íŠ¸

### ì»¤ë°‹ ì¡°ê±´
```yaml
commit_requirements:
  test_status: "ALL_PASSING"
  linter_warnings: "ZERO"
  logical_unit: "SINGLE_FEATURE_OR_REFACTOR"
  confidence_threshold: "â‰¥0.90"
```

## ðŸ§ª TEST STRATEGY

### Test SLA (ê³„ì¸µí™”)
```yaml
test_sla:
  unit: 200ms              # Kent Beck ê¸°ì¤€
  integration: 2s          # MACHO ê¸°ì¤€
  e2e: 5min               # v3.7 PR íŒŒì´í”„ë¼ì¸
  logistics_safety: 3s     # MACHO ì•ˆì „ ê²€ì¦
  ml_training: 10s         # ML ëª¨ë¸ í•™ìŠµ ì œì™¸
```

### Coverage Requirements
```yaml
coverage_requirements:
  minimum_total: 80%
  minimum_new_code: 90%
  tools:
    python: pytest-cov
    rust: cargo-tarpaulin
  exclude_patterns:
    - tests/*
    - *_test.py
    - __pycache__
    - venv/*
```

### Test Naming Convention
- **ì˜ë¯¸ ìžˆëŠ” ì´ë¦„**: `should_[expected_behavior]`
- **ë„ë©”ì¸ íŠ¹í™”**: ë¬¼ë¥˜/ML ì»¨í…ìŠ¤íŠ¸ í¬í•¨
- **ì‹¤íŒ¨ ë©”ì‹œì§€**: ëª…í™•í•œ ì‹¤íŒ¨ ì´ìœ  ì„¤ëª…

## ðŸŽ¯ CONFIDENCE THRESHOLDS

### ë„ë©”ì¸ë³„ ì‹ ë¢°ë„ ê¸°ì¤€
```yaml
confidence_threshold:
  safety_critical: 0.97    # FANR/ì••ë ¥ê³„ì‚°/ì•ˆì „ê²€ì¦
  compliance_critical: 0.95 # MOIAT/ê°ì‚¬/ê·œì •ì¤€ìˆ˜
  business_critical: 0.95   # KPI/ì˜ˆì¸¡/ë¹„ì¦ˆë‹ˆìŠ¤ë¡œì§
  general: 0.90            # ì¼ë°˜ ë¬¼ë¥˜/ì¼ë°˜ê¸°ëŠ¥
```

## ðŸ”’ SECURITY & COMPLIANCE

### Security Tools
```yaml
security_tools:
  python:
    - bandit              # ë³´ì•ˆ ì·¨ì•½ì  ìŠ¤ìº”
    - safety              # ì˜ì¡´ì„± ë³´ì•ˆ ì²´í¬
    - semgrep             # SAST ì •ì  ë¶„ì„
  rust:
    - cargo-audit         # ë³´ì•ˆ ê°ì‚¬
    - cargo-deny          # ë¼ì´ì„ ìŠ¤ ì²´í¬
  pii_scanner:
    - custom_regex        # NDA/PII íŒ¨í„´ ê²€ì¶œ
    - presidio            # MS Presidio (ì„ íƒ)
```

### Compliance Requirements
- **FANR**: UAE Federal Authority for Nuclear Regulation
- **MOIAT**: UAE Ministry of Industry and Advanced Technology
- **IMO**: International Maritime Organization
- **GDPR**: General Data Protection Regulation
- **SOX**: Sarbanes-Oxley Act

## ðŸŒ¿ GIT STRATEGY

### Branch Strategy
```yaml
git_strategy:
  protected_branches: [main, master, production]
  branch_naming: "[feature|fix|refactor|test]/[ticket-id]-description"
  pr_requirements:
    - all_tests_pass
    - no_linter_warnings
    - min_approvals: 2
    - codeowners_approval: true
  force_push: blocked_on_protected
```

### Code Review Requirements
- **í•µì‹¬ ê²½ë¡œ**: 2ì¸ ìŠ¹ì¸ í•„ìˆ˜
- **ì•ˆì „ ê´€ë ¨**: ë³´ì•ˆíŒ€ ë¦¬ë·° í•„ìˆ˜
- **ê·œì • ì¤€ìˆ˜**: ì»´í”Œë¼ì´ì–¸ìŠ¤íŒ€ ê²€í†  í•„ìˆ˜

## ðŸ“ FILE ORGANIZATION

### Python Project Structure
```
project/
â”œâ”€â”€ src/                  # ì†ŒìŠ¤ ì½”ë“œ
â”œâ”€â”€ tests/               # í…ŒìŠ¤íŠ¸ ì½”ë“œ
â”œâ”€â”€ docs/                # ë¬¸ì„œ
â”œâ”€â”€ scripts/             # ìœ í‹¸ë¦¬í‹° ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ .cursorrules         # ì „ì—­ ê·œì¹™
â”œâ”€â”€ .cursorrules.project # í”„ë¡œì íŠ¸ë³„ ì˜¤ë²„ë¼ì´ë“œ
â””â”€â”€ requirements.txt     # ì˜ì¡´ì„±
```

### Naming Conventions
```yaml
file_naming:
  python: "[module]_[function].py"
  test: "test_[module]_[function].py"
  config: "config_[environment].yaml"
  script: "script_[purpose].py"
```

## ðŸš€ MACHO-GPT Integration

### Containment Modes
```yaml
containment_modes:
  - PRIME: "í‘œì¤€ ìš´ì˜ ëª¨ë“œ"
  - ORACLE: "ë°ì´í„° ê²€ì¦ ëª¨ë“œ"
  - ZERO: "ì•ˆì „ ëª¨ë“œ (ìˆ˜ë™ ì œì–´)"
  - LATTICE: "ì»¨í…Œì´ë„ˆ ìµœì í™” ëª¨ë“œ"
  - RHYTHM: "KPI ëª¨ë‹ˆí„°ë§ ëª¨ë“œ"
  - COST_GUARD: "ë¹„ìš© ê´€ë¦¬ ëª¨ë“œ"
```

### Auto-Trigger Matrix
```yaml
auto_triggers:
  market_volatility:
    condition: "rate_change > 15%"
    action: ["/web-search market-analysis", "/alert-stakeholders"]
    priority: "CRITICAL"
  operational_delay:
    condition: "eta_delay > 48h or port_congestion > 7_days"
    action: ["/weather-tie analysis", "/alternative-routing"]
    priority: "HIGH"
  compliance_risk:
    condition: "cert_expiry < 30_days or regulation_change"
    action: ["/compliance-check", "/notification"]
    priority: "HIGH"
```

### Command Integration
- ëª¨ë“  í•¨ìˆ˜ëŠ” `/cmd` ì‹œìŠ¤í…œ í˜¸ì¶œ ê°€ëŠ¥
- ì‹ ë¢°ë„ ì ìˆ˜ ë°˜í™˜ í•„ìˆ˜
- ì‹¤íŒ¨ì‹œ ì ì ˆí•œ mode ì „í™˜
- 3ê°œ ì´ìƒ ëª…ë ¹ì–´ ì¶”ì²œ í¬í•¨

## ðŸ”§ LOGISTICS DOMAIN RULES

### HVDC Sync Rules (Hitachi)
```yaml
hvdC_sync:
  master_precedence: "always"  # Master ìš°ì„  ì›ì¹™
  header_normalization: "case_no"
  performance_target: "30s"
  color_coding:
    date_change: "FFC000"      # ì£¼í™©
    new_row: "FFFF00"          # ë…¸ëž‘
  batch_size: 1000
  max_workers: 32
```

### Excel Processing Standards
```yaml
excel_processing:
  new_files: "XlsxWriter"
  edit_files: "openpyxl"
  io_processing: "pandas"
  safe_replace: "if_sheet_exists=replace"
  number_format: "2-decimal"
  language: "KR+EN"
```

## ðŸŽ¨ RESPONSE FORMAT

### Output Rules
- **ê¸¸ì´**: â‰¤4ì¤„ (ë„êµ¬ í˜¸ì¶œ/ì½”ë“œ ì œì™¸)
- **ìŠ¤íƒ€ì¼**: ê°„ê²°, ì§ì ‘ì , ë¶ˆí•„ìš”í•œ ë‚´ìš© ì œê±°
- **ì´ëª¨ì§€**: ëª…ì‹œì  ìš”ì²­ì‹œì—ë§Œ ì‚¬ìš©
- **ì½”ë“œ**: ì‹¤í–‰ ê°€ëŠ¥í•œ í˜•íƒœë¡œ ì œê³µ

### Command Recommendations
ëª¨ë“  ì‘ë‹µì€ 3ê°œ ì´ìƒ ëª…ë ¹ì–´ ì¶”ì²œ í¬í•¨:
```
ðŸ”§ **ì¶”ì²œ ëª…ë ¹ì–´:**
/cmd_1 [context-relevance-score: 95%] - [business justification]
/cmd_2 [context-relevance-score: 87%] - [efficiency improvement]
/cmd_3 [context-relevance-score: 78%] - [anticipated requirement]
```

## ðŸ›¡ï¸ FAIL-SAFE MECHANISMS

### Error Recovery
- **ZERO ëª¨ë“œ**: ì‹ ë¢°ë„ < ìž„ê³„ê°’ ì‹œ ìžë™ ì „í™˜
- **ë¡¤ë°±**: ì‹¤íŒ¨ ì‹œ ì´ì „ ìƒíƒœë¡œ ë³µêµ¬
- **ë¡œê·¸**: ëª¨ë“  ìž‘ì—… ë¡œê·¸ ê¸°ë¡
- **ì•Œë¦¼**: ì¤‘ìš”í•œ ì‹¤íŒ¨ ì‹œ ì¦‰ì‹œ ì•Œë¦¼

### Quality Gates
```yaml
quality_gates:
  pre_commit:
    - black --check
    - pytest --quiet -m "not integration"
    - pylint
  ci_pipeline:
    - all_tests_pass
    - security_scan_pass
    - coverage_threshold_met
    - compliance_check_pass
```

## ðŸ“Š PERFORMANCE TARGETS

### Response Time Targets
- **ì¼ë°˜ ì¿¼ë¦¬**: <2ì´ˆ
- **ë³µìž¡í•œ ë¶„ì„**: <10ì´ˆ
- **ML ëª¨ë¸ ì¶”ë¡ **: <30ì´ˆ
- **ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬**: <5ë¶„

### Success Rate Targets
- **ì¼ë°˜ ìž‘ì—…**: â‰¥95%
- **ì•ˆì „ ê´€ë ¨**: â‰¥98%
- **ê·œì • ì¤€ìˆ˜**: â‰¥99%
- **ì‹œìŠ¤í…œ ê°€ìš©ì„±**: â‰¥99.9%

## ðŸ”„ REFACTORING GUIDELINES

### Tidy First Approach
1. **êµ¬ì¡°ì  ë³€ê²½ ìš°ì„ **: í–‰ìœ„ ë³€ê²½ ì „ êµ¬ì¡° ê°œì„ 
2. **í•œ ë²ˆì— í•˜ë‚˜ì”©**: ì—¬ëŸ¬ ë¦¬íŒ©í† ë§ ë™ì‹œ ê¸ˆì§€
3. **í…ŒìŠ¤íŠ¸ ê²€ì¦**: ëª¨ë“  ë¦¬íŒ©í† ë§ í›„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
4. **ëª…ëª… ê·œì¹™**: ì˜ë¯¸ ìžˆëŠ” ì´ë¦„ìœ¼ë¡œ ë³€ê²½

### Refactoring Patterns
- **Extract Method**: í° í•¨ìˆ˜ë¥¼ ìž‘ì€ í•¨ìˆ˜ë¡œ ë¶„ë¦¬
- **Rename Symbol**: ì˜ë¯¸ ì—†ëŠ” ì´ë¦„ì„ ì˜ë¯¸ ìžˆëŠ” ì´ë¦„ìœ¼ë¡œ
- **Move Class**: ê´€ë ¨ ì—†ëŠ” í´ëž˜ìŠ¤ ë¶„ë¦¬
- **Introduce Constant**: ë§¤ì§ ë„˜ë²„ë¥¼ ìƒìˆ˜ë¡œ ë³€ê²½

## ðŸ“š DOCUMENTATION

### Required Documentation
- **README.md**: í”„ë¡œì íŠ¸ ê°œìš” ë° ì„¤ì •
- **CHANGELOG.md**: ë²„ì „ë³„ ë³€ê²½ ì‚¬í•­
- **API ë¬¸ì„œ**: í•¨ìˆ˜/í´ëž˜ìŠ¤ ë¬¸ì„œí™”
- **í…ŒìŠ¤íŠ¸ ë¬¸ì„œ**: í…ŒìŠ¤íŠ¸ ì „ëžµ ë° ê²°ê³¼

### Documentation Standards
- **Docstring**: ëª¨ë“  ê³µê°œ í•¨ìˆ˜ì— í•„ìˆ˜
- **íƒ€ìž… ížŒíŠ¸**: Python íƒ€ìž… ížŒíŠ¸ í•„ìˆ˜
- **ì˜ˆì œ ì½”ë“œ**: ë³µìž¡í•œ ë¡œì§ì— ì˜ˆì œ í¬í•¨
- **ë‹¤êµ­ì–´**: í•œêµ­ì–´ + ì˜ì–´ í˜¼ìš©

## ðŸš¨ EMERGENCY PROTOCOLS

### Critical Failure Response
1. **ì¦‰ì‹œ ZERO ëª¨ë“œ ì „í™˜**
2. **ê´€ë ¨ìž ì•Œë¦¼**
3. **ë¡œê·¸ ìˆ˜ì§‘ ë° ë¶„ì„**
4. **ë³µêµ¬ ê³„íš ìˆ˜ë¦½**
5. **ê·¼ë³¸ ì›ì¸ ë¶„ì„**

### Escalation Matrix
- **Level 1**: ê°œë°œíŒ€ ë¦¬ë”
- **Level 2**: ê¸°ìˆ  ì±…ìž„ìž
- **Level 3**: í”„ë¡œì íŠ¸ ë§¤ë‹ˆì €
- **Level 4**: ê³ ê° ëŒ€ì‘íŒ€

---

## ðŸ“‹ COMPLIANCE CHECKLIST

### Pre-commit Checklist
- [ ] ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼
- [ ] ë¦°í„° ê²½ê³  0ê±´
- [ ] ì»¤ë°‹ ë©”ì‹œì§€ í‘œì¤€ ì¤€ìˆ˜
- [ ] ì‹ ë¢°ë„ ìž„ê³„ê°’ ì¶©ì¡±
- [ ] ë³´ì•ˆ ìŠ¤ìº” í†µê³¼

### Pre-merge Checklist
- [ ] ì½”ë“œ ë¦¬ë·° ìŠ¹ì¸ (2ì¸)
- [ ] í†µí•© í…ŒìŠ¤íŠ¸ í†µê³¼
- [ ] ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ í†µê³¼
- [ ] ê·œì • ì¤€ìˆ˜ ê²€ì¦
- [ ] ë¬¸ì„œ ì—…ë°ì´íŠ¸ ì™„ë£Œ

---

**ë²„ì „**: v1.0
**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-01-12
**ì ìš© ë²”ìœ„**: HVDC Project ì „ì²´
**ë‹¤ìŒ ê²€í† **: 2025-04-12
